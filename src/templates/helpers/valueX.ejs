<% if( value != null) { %>
  <%- (typeof excludePreComma !== 'undefined' && excludePreComma) ? '' : ',' %>
  <%   if(typeof value === "number"){ %>
    "valueInteger": <%- value %>
  <% } else if(typeof value === "boolean"){ %>
    "valueBoolean": <%- value %>
  <% } else if(typeof value === "string"){ %>

  <% 
    let quantMatch =  /^-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?[0-9]+)?((\s){1,3}(\S{1,15}))?$/.exec(value)
    if (/^([0-9]([0-9]([0-9][1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2][0-9]|3[0-1]))?)?$/.test(value)){  %>
        "valueDate" : "<%- value %>"
      <%} else if(/^\d\d\d\d-\d\d-\d\dT\d\d(:\d\d(:\d\d(-\d\d:\d\d)?)?)?$/.test(value)){ %>
       "valueDateTime" : "<%- value %>"
      <%} else if (/^([01][0-9]|2[0-3]):[0-5][0-9]:([0-5][0-9]|60)(\.[0-9]+)?$/.test(value)){ %>
       "valueTime" : "<%- value %>"
       <% } else if (quantMatch){  %>
        "valueQuantity" : {"value" : <%- quantMatch[1] %><% if(quantMatch[6]) { %>,
                           "unit":"<%- quantMatch[6] %>" 
                         <%}%>
                         }
      <%} else { %>
       "valueString" : "<%- value %>"
       <% } %>
    <%} else if(value.code){ %>
      <%- include("/helpers/codableConcept", {name: "valueCodeableConcept" , obj: value, excludePreComma: true}) %>
    <% } else if(value.high  || value.low ){ %>
    "valueRange": {
      "high" : "<%- value.high %>",
      "low" : "<%- value.low %>"
    }
    <%} else if(value.start  || value.end ){ %>
    "valuePeriod" : {
      "start" : "<%- value.start %>",
      "end" : "<%- value.end %>"
    }
    <% } else if(value.unit){ %>
     "valueQuantity" : {
       "unit" : "<%- value.unit %>",
       "value" : <%- value.value %>
     }
     <% } 

    }%>
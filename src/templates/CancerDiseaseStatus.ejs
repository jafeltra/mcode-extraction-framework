<%# Based on http://hl7.org/fhir/us/mcode/StructureDefinition/onco-core-CancerDiseaseStatus %>
<% /* %>
{
  id: String,
  status: String,
  effectiveDateTime: DateTime,
  condition: {
    id: String,
    name: String,
  },
  subject: {
    id: String,
    name: String,
  },
  value: {
    system: String,
    code: String,
    display: String,
  },
}
<% */ %>
{
  "resourceType": "Observation",
  "id": "<%- id %>",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/us/mcode/StructureDefinition/onco-core-CancerDiseaseStatus"
    ]
  },
  "category": [
    {
      "coding": [
        {
          "system": "http://terminology.hl7.org/CodeSystem/observation-category",
          "code": "therapy",
          "display": "Therapy"
        }
      ]
    }
  ],
  "status": "<%- status %>",
  "code": {
    "coding": [
      {
          "system": "http://loinc.org",
          "code": "88040-1",
          "display": "Response to cancer treatment"
      }
    ]
  },
  "focus" : [
    {
      "reference": "Condition/<%- condition.id %>"<% if (condition.name) { %>,
      "display": "<%- condition.name %>"
      <% } %>
    }
  ],
  "subject" : {
    "reference": "Patient/<%- subject.id %>"<% if (subject.name) { %>,
    "display": "<%- subject.name %>"
    <% } %>
  },
  "effectiveDateTime" : "<%- effectiveDateTime %>",
  "valueCodeableConcept": {
    "coding": [
      {
        "system": "<%- value.system %>",
        "code": "<%- value.code %>",
        "display": "<%- value.display %>"
      }
    ]
  }
}

